<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Badge Website</title>

    <link rel="stylesheet" href="styles.css" />
    <!-- Updated the link to a newer version to include the X(twitter) icon -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="./Favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./Favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="./Favicon/favicon-16x16.png"
    />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="icon" href="Favicon/favicon.ico?v=2">
  </head>
  <body>

    <header>
      <div class="header-container">
        <div class="logo">
          <img src="Favicon/favicon-32x32.png" alt="Logo" />
          <h1>Badge Website</h1>
        </div>
        <nav class="nav-links">
          <ul class="sidebar">
            <li class="showOnMobile" onclick=hideSidebar()><svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#FFFFFF"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></li>
            <li class="showOnMobile"><a href="#">Home</a></li>
            <li class="showOnMobile"><a href="#">About</a></li>
            <li class="showOnMobile"><a href="./pages/contact.html">Contact</a></li>
            <li class="showOnMobile"><a href="./pages/badges.html">Badges</a></li>
          </ul>
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="./pages/about.html">About</a></li>
            <li><a href="./pages/contact.html">Contact</a></li>
            <li><a href="./pages/badges.html">Badges</a></li>
            <li class="hideOnMobile"><a href="/">Home</a></li>
            <li class="hideOnMobile"><a href="./pages/about.html">About</a></li>
            <li class="hideOnMobile"><a href="./pages/contact.html">Contact</a></li>
            <li class="hideOnMobile"><a href="./pages/badges.html">Badges</a></li>
            <li class="menu-btn" onclick=showSidebar()><a href="#"><svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#5f6368"><path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"/></svg></a></li>
          </ul>
        </nav>
        <!-- <div class="menu-toggle">
          <i class="fas fa-bars"></i>
        </div> -->
      </div>
    
      <!-- Search bar  -->
      <div class="search-bar-container">
        <input type="text" id="badge-search" placeholder="Search for badges..." />
        <button id="search-button" class="search-button">Search</button>
      </div>
    </header>
    
    <div class="slider-container">
      <div class="slider" id="badge-slider">
        <!-- Slides will be dynamically generated here -->
      </div>
  
      <!-- Slider Navigation -->
      <div class="slider-nav">
        <button id="prev-btn">
          <img src="assets/icons/chevron-left.png" alt="Prev" width="32" height="32">
        </button>
        <button id="next-btn">
          <img src="assets/icons/chevron-right.png" alt="Next" width="32" height="32">
        </button>
      </div>
    </div>

    <footer>
      <div class="footer-text">
        <p>
          Follow us on
          <a href="https://github.com/rajatuiwebdev/badge-website">Github</a> |
          <a href="https://www.linkedin.com/in/rajatrajput2004/">LinkedIn</a>
        </p>
        <p>&copy; 2024 Rajat Rajput | All rights reserved</p>
      </div>
    </footer>

    <!-- QRious Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
          const sidebar = document.querySelector('.sidebar');
          sidebar.style.display = 'none';
      });

      function showSidebar() {
          const sidebar = document.querySelector('.sidebar');
          sidebar.style.display = 'flex'; // Show the sidebar
      }

      function hideSidebar() {
          const sidebar = document.querySelector('.sidebar');
          sidebar.style.display = 'none'; // Hide the sidebar
      }
    </script>

    <script>
      // badges list slider
      const badgeList = [
        {
          imageUrl: "https://ai.mlsc-amity.tech/dist/imgdb/newcomer.png",
          title: "Season of AI | Beginner AI Learner",
          awardedTo: "hello.rajat.rajput@gmail.com",
          issuedOn: "Jul 28, 2024",
          issuedAt: "1:11 AM",
          downloadLink: "assets/images/badge.png",
        },
        {
          imageUrl: "https://ai.mlsc-amity.tech/dist/imgdb/newcomer.png",
          title: "Season of AI | Intermediate AI Learner",
          awardedTo: "example.user@example.com",
          issuedOn: "Sep 17, 2024",
          issuedAt: "3:55 PM",
          downloadLink: "assets/images/badge.png",
        }
      ];

      const slider = document.getElementById('badge-slider');

      badgeList.forEach((badge) => {
        const slide = document.createElement('div');
        slide.classList.add('badge-slide');

        slide.innerHTML = `
          <div class="badge">
            <img src="${badge.imageUrl}" alt="Badge Image" />
            <div class="badge-details">
              <h2 class="typingeffect">${badge.title}</h2>
              <p>Awarded to: <strong>${badge.awardedTo}</strong></p>
              <p>Issued on: <strong>${badge.issuedOn}</strong> at <strong>${badge.issuedAt}</strong></p>
            </div>
            <div class="qr-download-card">
              <a id="download-qr-button" class="download-button">Download QR Code</a>
              <canvas id="qr-code-canvas" style="display: none;"></canvas>
            </div>
            <div class="download-card">
              <a download href="${badge.downloadLink}" class="download-button">Download Badge</a>
            </div>
            <div class="share-section">
              <p>Share your badge:</p>
              <a href="https://x.com/intent/tweet?text=I%20earned%20the%20${badge.title}%20Badge!%20Check%20it%20out:%20https://ai.mlsc-amity.tech%20&hashtags=AI,Badge" target="_blank" class="share-button twitter">
                <i class="fa-brands fa-square-x-twitter"></i>
              </a>
              <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://ai.mlsc-amity.tech&title=${badge.title}&summary=I%20earned%20the%20${badge.title}%20Badge!%20Check%20it%20out:" target="_blank" class="share-button linkedin">
                <i class="fab fa-linkedin"></i>
              </a>
              <a href="https://www.facebook.com/sharer/sharer.php?u=https://ai.mlsc-amity.tech" target="_blank" class="share-button facebook">
                <i class="fab fa-facebook-f"></i>
              </a>
            </div>
          </div>
        `;

        slider.appendChild(slide);
      });

      let currentIndex = 0;

      document.getElementById('next-btn').addEventListener('click', () => {
        if (currentIndex < badgeList.length - 1) {
          currentIndex++;
        } else {
          currentIndex = 0;
        }
        updateSliderPosition();
      });

      document.getElementById('prev-btn').addEventListener('click', () => {
        if (currentIndex > 0) {
          currentIndex--;
        } else {
          currentIndex = badgeList.length - 1;
        }
        updateSliderPosition();
      });

      function updateSliderPosition() {
        slider.style.transform = `translateX(-${currentIndex * 100}%)`;
      }
    </script>

    <script>
      // Typing effect for badge title
      document.addEventListener("DOMContentLoaded", function() {
        const badgeTitles = document.querySelectorAll('.typingeffect'); 
        let typingSpeed = 100; // Speed of typing
        let pauseBetweenBadges = 2000; // Pause between badges when typing completes

        badgeTitles.forEach((badgeTitle, index) => {
          const badgeTitleText = badgeTitle.innerText;
          badgeTitle.innerText = ''; 
          let charIndex = 0;
          let typingDirection = 1; 

          // Start typing effect for each badge
          function typeEffect() {
            if (typingDirection === 1 && charIndex < badgeTitleText.length) {
              badgeTitle.innerText = badgeTitleText.substring(0, charIndex + 1);
              charIndex++;
              setTimeout(typeEffect, typingSpeed);
            } else if (typingDirection === -1 && charIndex > 0) {
              badgeTitle.innerText = badgeTitleText.substring(0, charIndex - 1);
              charIndex--;
              setTimeout(typeEffect, typingSpeed);
            } else {
              // Reverse typing direction once the typing/deleting is done
              typingDirection *= -1;

              // Pause before switching direction
              setTimeout(typeEffect, typingDirection === 1 ? pauseBetweenBadges : 500);
            }
          }

          // Delay starting the typing effect for each badge to create sequential typing
          setTimeout(typeEffect, index * (badgeTitleText.length * typingSpeed + pauseBetweenBadges));
        });
      });

      // QR Code Generation
      const qrCodeCanvas = document.getElementById('qr-code-canvas');

      // Badge details
      const recipientEmail = 'hello.rajat.rajput@gmail.com';
      const issuedDate = 'Jul 28, 2024';
      const badgeLink = `https://ai.mlsc-amity.tech?badge=${recipientEmail}&issued=${issuedDate}`;

      // Create QR code
      const qrCode = new QRious({
        element: qrCodeCanvas,
        size: 200,
        value: `Badge awarded to: ${recipientEmail}\nIssued on: ${issuedDate}\nLink: ${badgeLink}`,
      });

      // Download QR button functionality
      document.getElementById('download-qr-button').addEventListener('click', function () {
        const link = document.createElement('a');
        link.href = qrCodeCanvas.toDataURL();
        link.download = 'badge-qr.png';
        link.click();
      });

      function createConfetti() {
        const totalConfetti = 100; // Total number of confetti pieces
        const confettiColors = ['#0d6efd', '#0a58ca', '#007bff', '#6cb2eb', '#81d4fa']; // Blue color palette

        for (let i = 0; i < totalConfetti; i++) {
          const confetti = document.createElement('div');
          confetti.classList.add('confetti');

          // Assign random sizes, colors, and positions for confetti pieces
          const size = Math.random() * 10 + 5 + 'px';
          const leftPosition = Math.random() * 100 + 'vw';
          const animationDuration = Math.random() * 3 + 2 + 's';
          const animationDelay = Math.random() * 2 + 's';
          const color = confettiColors[Math.floor(Math.random() * confettiColors.length)];

          confetti.style.width = size;
          confetti.style.height = size;
          confetti.style.left = leftPosition;
          confetti.style.backgroundColor = color;
          confetti.style.animationDuration = animationDuration;
          confetti.style.animationDelay = animationDelay;

          document.body.appendChild(confetti);

          // Remove confetti from DOM after it falls
          setTimeout(() => {
            confetti.remove();
          }, parseFloat(animationDuration) * 1000); // Convert animation duration from seconds to milliseconds
        }
      }

      function getRandomColor() {
        // Blue color palette for confetti
        const colorsBlu = ['#0d6efd', '#0a58ca', '#007bff', '#6cb2eb', '#81d4fa'];
        return colorsBlu[Math.floor(Math.random() * colorsBlu.length)];
      }

      // Trigger the confetti on page load
      window.addEventListener('load', () => {
        createConfetti();
      });

      // Search bar functionality
      const searchInput = document.getElementById('badge-search');
      const searchButton = document.getElementById('search-button');
      const badges = document.querySelectorAll('.badge-item');

      function filterBadges() {
        const searchQuery = searchInput.value.toLowerCase();

      badges.forEach(badge => {
        const badgeTitle = badge.querySelector('.badge-details h2').innerText.toLowerCase();
        
        if (badgeTitle.includes(searchQuery)) {
          badge.style.display = 'block';  // Show the badge if it matches
        } else {
          badge.style.display = 'none';   // Hide the badge if it doesn't match
        }
      });
    }

      // Add event listener for search button click
      searchButton.addEventListener('click', function () {
        filterBadges();  
      });

      searchInput.addEventListener('keyup', function (event) {
        if (event.key === 'Enter') {
          filterBadges();
        }
      });
    </script>
  </body>
</html>
